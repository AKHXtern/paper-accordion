<!--
@author Arshak Khachatrian (<a href="mailto:akhxtern@gmail.com">akhxtern@gmail.com</a>)
@website http://spacee.xyz
@updateDate Mar 10, 2017

**********
*
*   *** PAPER ACCORDION ***
*
*   This floating action button is using the Material Design concept of expandable
*   Paper Fab Button and using the Polymer components to make the concept happen.
*
*   *** EXAMPLE - without links ***
*   <paper-fab-menu color="teal" icon="add" position="vertical">
*        <paper-fab-menu-item color="teal" label="Favorites" icon="star" ></paper-fab-menu-item>
*        <paper-fab-menu-item color="teal" label="Favorites" icon="star" ></paper-fab-menu-item>
*        <paper-fab-menu-item color="teal" label="Favorites" icon="star" ></paper-fab-menu-item>
*   </paper-fab-menu>
*
*   *** EXAMPLE - with links ***
*
*   <paper-accordion>
*        <a href="#/favorites">
*            <paper-fab-menu-item color="red" label="Favorites" icon="star" ></paper-fab-menu-item>
*        </a>
*        <a href="#/favorites">
*            <paper-fab-menu-item color="red" label="Favorites" icon="star" ></paper-fab-menu-item>
*        </a>
*        <a href="#/favorites">
*            <paper-fab-menu-item color="red" label="Favorites" icon="star" ></paper-fab-menu-item>
*        </a>
*   </paper-fab-menu>
*
********** -->

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="./paper-accordion-item.html">

<dom-module id="paper-accordion">
    <template>
        <style>

        </style>

        <div class="container">
            <content is="paper-accordion-item"></content>
        </div>
    </template>
    <script>
        Polymer({
            is: 'paper-accordion',
            properties: {
                closeOthers: {
                    type: Boolean,
                    value: false
                }
            },
            attached: function(){
                let that = this;

                if(that.closeOthers) {
                    let items = Polymer.dom(that).children;

                    if(items && items.length) {
                        items.forEach(function(item){
                            item.addEventListener('paper-accordion-open', function(){
                                let openedElements = that.querySelectorAll('paper-accordion-item[opened]');
                                openedElements.forEach(function(element) {
                                    if(element != item) {
                                        element.close();
                                    }
                                });
                            });
                        })
                    }
                }
            }
        })
    </script>
</dom-module>
